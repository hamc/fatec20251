name: Observability 

on:
  pull_request:

env:
  NODE_ENV: test

jobs:
  build-and-test:
    runs-on: ubuntu-latest

    steps:
      - name: â¬‡ï¸ Checkout do cÃ³digo
        uses: actions/checkout@v3

      - name: ğŸŸ¡ Ativando modo debug (ACTIONS_STEP_DEBUG)
        run: echo "ACTIONS_STEP_DEBUG=true" >> $GITHUB_ENV

      - name: ğŸ“¦ Instalando dependÃªncias
        run: |
          echo "::group::InstalaÃ§Ã£o de dependÃªncias"
          cd test-app
          npm install
          echo "::endgroup::"
      - name: ğŸ§ª Executando testes com mediÃ§Ã£o de tempo
        run: |
          echo "::group::ExecuÃ§Ã£o dos testes"
          cd test-app
          start_time=$(date +%s)
          npm test
          end_time=$(date +%s)
          duration=$((end_time - start_time))
          echo "::endgroup::"
          echo "ğŸ•’ Tempo de execuÃ§Ã£o dos testes: ${duration} segundos"
      - name: ğŸ“‹ InformaÃ§Ãµes finais da execuÃ§Ã£o
        run: |
          echo "::group::InformaÃ§Ãµes do ambiente"
          echo "ğŸ“Œ Branch: ${{ github.ref }}"
          echo "ğŸ“… HorÃ¡rio de execuÃ§Ã£o: $(date -u)"
          echo "::endgroup::"
